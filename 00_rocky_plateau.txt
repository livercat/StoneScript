/*
Copyright © 2019-2022, Matjaž Guštin
<dev@matjaz.it> <https://matjaz.it>
Released under the BSD 3-clause license.

Level: Rocky plateau
*/

?loc = rocky
  equip shovel
  healwalk()

  // Boss: Dysangelos, phase 1 (base form)
  ?foe = dysangelos_bearer
    equip_1h_melee()

  // Boss: Dysangelos, phase 2 (elemental form)
  ?foe = dysangelos_elementalist
    equip_1h_melee()
    ?foe = aether
      equip_1h_melee("vigor")
    :?foe = fire
      equip_1h_melee("aether")
    :?foe = ice
      equip_1h_melee("fire")
    :?foe = poison
      equip_1h_melee("ice")
    :?foe = vigor
      equip_1h_melee("poison")

  // Boss: Dysangels, phase 3 (perfect form)
  ?foe = dysangelos_perfected
    equip_1h_melee()
    ?foe.armor > 0
      equip_armor_piercing()
    // Their most powerful move deals 30 damage
    // points on 5* difficulty, so we need to
    // heal if we don't have enough health and
    // armor combined
    ?(hp + armor) < 31
      activate potion
    ?foe.state=115 & foe.time=50
      equip mind stone
